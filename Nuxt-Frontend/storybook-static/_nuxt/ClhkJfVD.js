import{u as D,o as F,a as M}from"./kSjqG4HC.js";import{u as B,p as O,a as $,h as j,n as N,w as z,b as H}from"./Djjdvgwa.js";import{u as w}from"./cUfzpFyX.js";import"./Gkaz0fAM.js";import{u as U,_ as L,C as k,a3 as Q,a4 as G,$ as R,U as V,Z as X,v as b,x as P,B as g,y,P as x,z as p,Q as q,a2 as S,T,F as A}from"./Dp5ZG7rL.js";import{A as Z}from"./Bxx9GC6x.js";import J from"./0Pf03w35.js";import{u as E}from"./CJm9ZGec.js";async function I(t,a=B()){const{path:i,matched:e}=a.resolve(t);if(!e.length||(a._routePreloaded||(a._routePreloaded=new Set),a._routePreloaded.has(i)))return;const o=a._preloadPromises=a._preloadPromises||[];if(o.length>4)return Promise.all(o).then(()=>I(t,a));a._routePreloaded.add(i);const r=e.map(n=>{var u;return(u=n.components)==null?void 0:u.default}).filter(n=>typeof n=="function");for(const n of r){const u=Promise.resolve(n()).catch(()=>{}).finally(()=>o.splice(o.indexOf(u)));o.push(u)}await Promise.all(o)}const K=(...t)=>t.find(a=>a!==void 0),W="noopener noreferrer",Y=globalThis.requestIdleCallback||(t=>{const a=Date.now(),i={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-a))};return setTimeout(()=>{t(i)},1)}),ee=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)});/*! @__NO_SIDE_EFFECTS__ */function te(t){const a=t.componentName||"NuxtLink",i=(e,o)=>{if(!e||t.trailingSlash!=="append"&&t.trailingSlash!=="remove")return e;const r=t.trailingSlash==="append"?z:H;if(typeof e=="string")return r(e,!0);const n="path"in e?e.path:o(e).path;return{...e,name:void 0,path:r(n,!0)}};return U({name:a,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},setup(e,{slots:o}){const r=B()??D(),n=L(()=>{const l=e.to||e.href||"";return i(l,r.resolve)}),u=L(()=>e.external||e.target&&e.target!=="_self"?!0:typeof n.value=="object"?!1:n.value===""||j(n.value,{acceptRelative:!0})),v=k(!1),c=k(null),C=l=>{var s;c.value=e.custom?(s=l==null?void 0:l.$el)==null?void 0:s.nextElementSibling:l==null?void 0:l.$el};if(e.prefetch!==!1&&e.noPrefetch!==!0&&e.target!=="_blank"&&!le()){const s=w();let f,d=null;Q(()=>{const h=ne();F(()=>{f=Y(()=>{var _;(_=c==null?void 0:c.value)!=null&&_.tagName&&(d=h.observe(c.value,async()=>{d==null||d(),d=null;const m=typeof n.value=="string"?n.value:r.resolve(n.value).fullPath;await Promise.all([s.hooks.callHook("link:prefetch",m).catch(()=>{}),!u.value&&I(n.value,r).catch(()=>{})]),v.value=!0}))})})}),G(()=>{f&&ee(f),d==null||d(),d=null})}return()=>{var h,_;if(!u.value){const m={ref:C,to:n.value,activeClass:e.activeClass||t.activeClass,exactActiveClass:e.exactActiveClass||t.exactActiveClass,replace:e.replace,ariaCurrentValue:e.ariaCurrentValue,custom:e.custom};return e.custom||(v.value&&(m.class=e.prefetchedClass||t.prefetchedClass),m.rel=e.rel),R(V("RouterLink"),m,o.default)}const l=typeof n.value=="object"?((h=r.resolve(n.value))==null?void 0:h.href)??null:n.value||null,s=e.target||null,f=e.noRel?null:K(e.rel,t.externalRelAttribute,l?W:"")||null,d=()=>N(l,{replace:e.replace});return e.custom?o.default?o.default({href:l,navigate:d,get route(){if(!l)return;const m=O(l);return{path:m.pathname,fullPath:m.pathname,get query(){return $(m.search)},hash:m.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:l}},rel:f,target:s,isExternal:u.value,isActive:!1,isExactActive:!1}):null:R("a",{ref:c,href:l,rel:f,target:s},(_=o.default)==null?void 0:_.call(o))}}})}const ae=te({componentName:"NuxtLink"});function ne(){const t=w();if(t._observer)return t._observer;let a=null;const i=new Map,e=(r,n)=>(a||(a=new IntersectionObserver(u=>{for(const v of u){const c=i.get(v.target);(v.isIntersecting||v.intersectionRatio>0)&&c&&c()}})),i.set(r,n),a.observe(r),()=>{i.delete(r),a.unobserve(r),i.size===0&&(a.disconnect(),a=null)});return t._observer={observe:e}}function le(){const t=navigator.connection;return!!(t&&(t.saveData||/2g/.test(t.effectiveType)))}const se=()=>{const t=E();return L(()=>t.value?t.value.roles.includes("ADMIN"):!1)},oe={class:"bg-slate-900"},re={class:"p-3 mx-auto w-full max-w-4xl"},ie={class:"flex gap-3"},ue={class:"ml-auto flex items-center gap-3"},ce=["disabled"],de={class:"landing-page"},_e=U({__name:"BaseHeader",setup(t){const a=se(),i=k(!1),e=k(!1),o=k(""),r=E(),n=l=>{console.log("Login successful for email:",l),o.value=l,e.value=!0},u=()=>{e.value=!1},{logout:v}=M(),c=X({pending:!1});async function C(){try{c.pending=!0,await v(),await N("/")}catch(l){console.error(l)}finally{c.pending=!1}}return(l,s)=>{const f=ae,d=V("RegistrationForm");return b(),P("header",oe,[g("div",re,[g("nav",ie,[y(f,{to:"/",class:"flex flex-col text-center"},{default:x(()=>s[1]||(s[1]=[g("span",{class:"font-bold text-lg uppercase leading-none"},"Aladia",-1),g("span",{class:"text-sm leading-none text-slate-400"},null,-1)])),_:1}),g("div",ue,[p(r)?(b(),P(q,{key:0},[y(f,{to:"/private",class:"px-3 font-semibold"},{default:x(()=>s[2]||(s[2]=[A("Private")])),_:1}),p(a)?(b(),S(f,{key:0,to:"/admin",class:"px-3 font-semibold"},{default:x(()=>s[3]||(s[3]=[A("Admin")])),_:1})):T("",!0),g("button",{class:"py-1.5 px-3 rounded bg-light-100 font-semibold text-sm text-slate-950 hover:bg-light-700 transition-colors",disabled:p(c).pending,onClick:C}," Logout ",8,ce)],64)):(b(),P(q,{key:1},[y(f,{to:"/guest",class:"px-3 font-semibold"},{default:x(()=>s[4]||(s[4]=[A("Public")])),_:1}),y(f,{to:"/login",class:"px-3 font-semibold"},{default:x(()=>s[5]||(s[5]=[A("Login")])),_:1})],64))])]),g("div",de,[y(Z,{visible:p(i),"onUpdate:visible":s[0]||(s[0]=h=>i.value=h)},{default:x(()=>[p(e)?T("",!0):(b(),S(J,{key:0,onLoginSuccess:n})),p(e)?(b(),S(d,{key:1,email:p(o),onGoBackToLogin:u},null,8,["email"])):T("",!0)]),_:1},8,["visible"])])])])}}});export{_e as _};
