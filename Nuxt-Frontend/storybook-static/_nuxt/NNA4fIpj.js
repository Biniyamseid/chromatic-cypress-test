import{u,n as i}from"./cUfzpFyX.js";import{u as l}from"./Djjdvgwa.js";import{G as d}from"./Dp5ZG7rL.js";function g(e,s){try{return s in e}catch{return!1}}var h=Object.defineProperty,_=(e,s,r)=>s in e?h(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,t=(e,s,r)=>(_(e,typeof s!="symbol"?s+"":s,r),r);class o extends Error{constructor(s,r={}){super(s,r),t(this,"statusCode",500),t(this,"fatal",!1),t(this,"unhandled",!1),t(this,"statusMessage"),t(this,"data"),t(this,"cause"),r.cause&&!this.cause&&(this.cause=r.cause)}toJSON(){const s={message:this.message,statusCode:c(this.statusCode,500)};return this.statusMessage&&(s.statusMessage=n(this.statusMessage)),this.data!==void 0&&(s.data=this.data),s}}t(o,"__h3_error__",!0);function m(e){if(typeof e=="string")return new o(e);if(M(e))return e;const s=new o(e.message??e.statusMessage??"",{cause:e.cause||e});if(g(e,"stack"))try{Object.defineProperty(s,"stack",{get(){return e.stack}})}catch{try{s.stack=e.stack}catch{}}if(e.data&&(s.data=e.data),e.statusCode?s.statusCode=c(e.statusCode,s.statusCode):e.status&&(s.statusCode=c(e.status,s.statusCode)),e.statusMessage?s.statusMessage=e.statusMessage:e.statusText&&(s.statusMessage=e.statusText),s.statusMessage){const r=s.statusMessage;n(s.statusMessage)!==r&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(s.fatal=e.fatal),e.unhandled!==void 0&&(s.unhandled=e.unhandled),s}function M(e){var s;return((s=e==null?void 0:e.constructor)==null?void 0:s.__h3_error__)===!0}const E=/[^\u0009\u0020-\u007E]/g;function n(e=""){return e.replace(E,"")}function c(e,s=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?s:e}const b="__nuxt_error",f=()=>d(u().payload,"error"),A=e=>{const s=x(e);try{const r=u(),a=f();r.hooks.callHook("app:error",s),a.value=a.value||s}catch{throw s}return s},P=async(e={})=>{const s=u(),r=f();s.callHook("app:error:cleared",e),e.redirect&&await l().replace(e.redirect),r.value=i},x=e=>{const s=m(e);return Object.defineProperty(s,b,{value:!0,configurable:!1,writable:!1}),s};export{P as a,m as b,x as c,A as s,f as u};
